## หลักการทำงานของ emulsiV
#### ต้องการให้โปรแกรมแสดงผลตัวอักษร T และ M จะมีการทำงานดังนี้

#### เริ่มต้นหน้าตาโปรแกรม

![image](https://user-images.githubusercontent.com/98943546/160089003-32543c05-3298-4dde-8e05-c354e6d83c74.png)

#### คำอธิบายตัวคำสั่ง

    addi ย่อมาจาก add immediate โดยคำสั่งนี้ จะนำเลข 32 เข้าไปบรรจุใน x1 โดยมี x0เป็นค่าเริ่มต้น
    lui ย่อมาจาก load upper immediate โดยคำสั่งนี้ จะนำค่า 20 หลักแรกจากทางขวามาเก็บไว้ที่ x2
    lbu ย่อมาจาก load byte unsigned โดยคำสั่งนี้จะนำข้อมูลจาก x1 เอาค่า byte จากตำแหน่งนั้นมาบรรจุที่ x3
    

### Step 1
มีขั้นตอนดังนี้

![image](https://user-images.githubusercontent.com/98943546/160092088-90be9612-2a09-4831-9be9-727ec0b0616b.png)

    1.จาก 00000000 ที่ pc ของ program counter จะเรียกใช้คำสั่งจาก address ที่ 00000000

    2.ข้อมูลจาก 00000000 นั้นก็คือ 93000002 ที่บรรจุคำสั่ง addi x1, x0x 32 จะถูกส่งไปยัง data ที่ Bus แล้วถูกแปลงสลับด้านเป็น02000093

    3.ข้อมูล data จะถูกส่งไปประมาณผลที่ Instruction req. จะได้ผลลัพธ์ว่าคือคำสั่ง addi นำเข้าตัวเลข 00000020 จากการแปลงเลข 32 ฐาน 10 เป็น ฐาน 16
    
    4.ALU จะทราบว่า op ที่ใช้คือ add จากนั้นจะเรียกค่าเริ่มต้นที่x0 เป็นตั้วตั้งที่ a และเรียกค่า imm เป็นตัวบวกเพิ่มที่ b บวกกันแล้วได้ค่า r
    
    5.ค่าของ r จะถูกบรรจุใน x1
    
    6.ค่า pc+4 จะไปแทนที่ค่า pc เริ่มต้น และตัวมันเองจะบวกถูกบวกอีก 4 เพิ่่มเป็น 00000008
    
    7.แถบสีชมพูจะเลื่อนจากที่ address 00000000 เป็น 00000004 
 
ได้ผลลัพธ์ดังรูป
 
 ![image](https://user-images.githubusercontent.com/98943546/160092707-d520da4d-4f39-4b94-b758-d71cff4e2edc.png)

### Step 2

มีขั้นตอนดังนี้

    1.จาก 00000004 ที่ pc ของ program counter จะเรียกใช้คำสั่งจาก address ที่ 00000004

    2.ข้อมูลจาก 00000004 นั้นก็คือ 370100c0 ที่บรรจุคำสั่ง lui x2, 0xc0000000 จะถูกส่งไปยัง data ที่ Bus แล้วถูกแปลงสลับด้านเป็นc0000137

    3.ข้อมูล data จะถูกส่งไปประมาณผลที่ Instruction req. จะได้ผลลัพธ์ว่าคือคำสั่ง lui นำเข้าตัวเลข c0000000 
    
    4.ALU จะทราบว่า op ในครั้งนี้คือ b โดยจะเรียกค่า b มาจาก imm มาเป็น ค่า r ในทันที
    
    5.ค่าของ r จะถูกบรรจุใน x2
    
    6.ค่า pc+4 จะไปแทนที่ค่า pc เริ่มต้น และตัวมันเองจะบวกถูกบวกอีก 4 เพิ่่มเป็น 0000000c
    
    7.แถบสีชมพูจะเลื่อนจากที่ address 00000004 เป็น 00000008
  
 ได้ผลลัพธ์ดังรูป 
 
 ![image](https://user-images.githubusercontent.com/98943546/160095748-a1d7f579-e58c-44ae-ae26-28bf009cb8a5.png)

### Step 3

มีขั้นตอนดังนี้

    1.จาก 00000008 ที่ pc ของ program counter จะเรียกใช้คำสั่งจาก address ที่ 00000008

    2.ข้อมูลจาก 00000008 นั้นก็คือ 83c10000 ที่บรรจุคำสั่ง Ibu x3, 0(x1) จะถูกส่งไปยัง data ที่ Bus แล้วถูกแปลงสลับด้านเป็น0000c183

    3.ข้อมูล data จะถูกส่งไปประมาณผลที่ Instruction req. จะได้ผลลัพธ์ว่าคือคำสั่ง lbu นำเข้าข้อมูลจาก x1 
    
    4.ALU จะทราบว่า op ในครั้งนี้คือ add โดยจะเรียกค่า a มาจาก x1 มาเป็น ค่า r ในทันที
    
    5.ค่าของ r ประมวณผลที่ Bus เรียก dataที่ address ตามค่าของ r ไปบรรจุเก็บที่ x3
    
    6.ค่า pc+4 จะไปแทนที่ค่า pc เริ่มต้น และตัวมันเองจะบวกถูกบวกอีก 4 เพิ่่มเป็น 00000010
    
    7.แถบสีชมพูจะเลื่อนจากที่ address 00000008 เป็น 0000000c
  
ได้ผลลัพธ์ดังรูป 

![image](https://user-images.githubusercontent.com/98943546/160100244-0a0fd566-cc19-430c-9db6-13c235728020.png)

